simulation:
    filaments:
        class_name: SingleStateFixedLengthFromConcentrations
        parameters:
            number: number_of_filaments
            concentration: seed_concentration
            filament_tip_concentration: filament_tip_concentration
        fixed_parameters:
            state: ADP

    concentrations:
        pyrene_ATP:
            class_name: FixedReagent
            parameters:
                initial_concentration: initial_pyrene_atp_concentration
                filament_tip_concentration: filament_tip_concentration
                number: number_of_filaments

        ATP:
            class_name: FixedReagent
            parameters:
                initial_concentration: initial_atp_concentration
                filament_tip_concentration: filament_tip_concentration
                number: number_of_filaments

        pyrene_ADPPi:
            class_name: FixedReagent
            parameters:
                filament_tip_concentration: filament_tip_concentration
                number: number_of_filaments
            fixed_parameters:
                initial_concentration: 0

        ADPPi:
            class_name: FixedReagent
            parameters:
                filament_tip_concentration: filament_tip_concentration
                number: number_of_filaments
            fixed_parameters:
                initial_concentration: 0

        pyrene_ADP:
            class_name: FixedReagent
            parameters:
                filament_tip_concentration: filament_tip_concentration
                number: number_of_filaments
            fixed_parameters:
                initial_concentration: 0

        ADP:
            class_name: FixedReagent
            parameters:
                filament_tip_concentration: filament_tip_concentration
                number: number_of_filaments
            fixed_parameters:
                initial_concentration: 0


        Pi:
            class_name: FixedReagent
            parameters:
                filament_tip_concentration: filament_tip_concentration
                number: number_of_filaments
            fixed_parameters:
                initial_concentration: 0

    # XXX Assign labels to end conditions
    #       it would be nice to know which ones end.
    end_conditions:
        - class_name: Duration
          parameters:
              duration: simulation_duration

    measurements:
        length:
            class_name: Length

        pyrene_atp_count:
            class_name: StateCount
            fixed_parameters:
                state: pyrene_ATP

        atp_count:
            class_name: StateCount
            fixed_parameters:
                state: ATP

        pyrene_adppi_count:
            class_name: StateCount
            fixed_parameters:
                state: pyrene_ADPPi

        adppi_count:
            class_name: StateCount
            fixed_parameters:
                state: ADPPi

        pyrene_adp_count:
            class_name: StateCount
            fixed_parameters:
                state: pyrene_ADP

        adp_count:
            class_name: StateCount
            fixed_parameters:
                state: ADP

analysis:
    pyrene_atp_count:
        class_name: StandardErrorOfTheMean
            fixed_parameters:
                measurement: pyrene_atp_count

    pyrene_adppi_count:
        class_name: StandardErrorOfTheMean
            fixed_parameters:
                measurement: pyrene_adppi_count

    adppi_count:
        class_name: StandardErrorOfTheMean
            fixed_parameters:
                measurement: adppi_count

    pyrene_adp_count:
        class_name: StandardErrorOfTheMean
            fixed_parameters:
                measurement: pyrene_adp_count

objectives:
    pollard_adppi_fit:
        class_name: SimpleDataFit
        fixed_parameters:
            measurements: [pyrene_adppi_count, adppi_count]
            data_file: 'pollard_2002/adppi_concentration.dat'
            residual_function: naked_chi_squared
            interpolate_simulations: True

    pollard_pyrene_fit:
        class_name: PyreneFit
        parameters:
            sample_period: sample_period
            duration:      simulation_duration

            atp_weight:   pyrene_atp_weight
            adppi_weight: pyrene_adppi_weight
            adp_weight:   pyrene_adp_weight

        fixed_parameters:
            data_file: 'pollard_2002/pyrene_fluorescence.dat'
            residual_function: naked_chi_squared
            interpolate_data: True
            atp_state:   pyrene_ATP
            adppi_state: pyrene_ADPPi
            adp_state:   pyrene_ADP

# Required parameters
simulation_parameters:
    - # Initial concentrations
    - initial_atp_concentration
    - initial_pyrene_atp_concentration
    - seed_concentration

    - # End Conditions
    - simulation_duration

    - # Misc
    - sample_period
    - number_of_filaments
    - filament_tip_concentration

objective_parameters:
    - pyrene_atp_weight
    - pyrene_adppi_weight
    - pyrene_adp_weight
